<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>4.4</version>
    <date>2021-04-12T12:37:58Z</date>
    <groups>
        <group>
            <name>IS_hypervisor</name>
        </group>
    </groups>
    <templates>
        <template>
            <template>Custom SNMP OS ESXi</template>
            <name>Custom SNMP OS ESXi</name>
            <description>Мониторинг гипревизора по SNMP.&#13;
Macros:&#13;
{$SNMP_COMMUNITY} = public&#13;
{$SNMP_PORT} = 161</description>
            <groups>
                <group>
                    <name>IS_hypervisor</name>
                </group>
            </groups>
            <applications>
                <application>
                    <name>.General</name>
                </application>
                <application>
                    <name>Disk partitions</name>
                </application>
                <application>
                    <name>Environment</name>
                </application>
                <application>
                    <name>Interfaces</name>
                </application>
                <application>
                    <name>Memory</name>
                </application>
                <application>
                    <name>Processors</name>
                </application>
                <application>
                    <name>Time</name>
                </application>
            </applications>
            <items>
                <item>
                    <name>ESXi Time UTC</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.2.1.25.1.2.0</snmp_oid>
                    <key>esxi.time.UTC</key>
                    <history>1d</history>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <applications>
                        <application>
                            <name>Time</name>
                        </application>
                    </applications>
                  </item>
                <item>
                    <name>Device name</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>SNMPv2-MIB::sysName.0</snmp_oid>
                    <key>sysName</key>
                    <delay>3600</delay>
                    <history>7d</history>
                    <trends>0</trends>
                    <value_type>CHAR</value_type>
                    <description>An administratively-assigned name for this managed node. By convention, this is the node's fully-qualified domain name.  If the name is unknown, the value is the zero-length string.</description>
                    <inventory_link>NAME</inventory_link>
                    <applications>
                        <application>
                            <name>.General</name>
                        </application>
                    </applications>
                    <request_method>POST</request_method>
                </item>
                <item>
                    <name>System Uptime</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.2.1.25.1.1.0</snmp_oid>
                    <key>sysUpTime</key>
                    <delay>60m</delay>
                    <history>7d</history>
                    <units>uptime</units>
                    <applications>
                        <application>
                            <name>.General</name>
                        </application>
                    </applications>
                    <preprocessing>
                        <step>
                            <type>MULTIPLIER</type>
                            <params>0.01</params>
                        </step>
                    </preprocessing>
                    <request_method>POST</request_method>
                </item>
                <item>
                    <name>ESXi physical CPU numbers</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>1.3.6.1.4.1.6876.3.1.1.0</snmp_oid>
                    <key>vmwNumCpus</key>
                    <delay>60</delay>
                    <description>Number of physical CPUs on the system.</description>
                    <applications>
                        <application>
                            <name>Processors</name>
                        </application>
                    </applications>
                    <request_method>POST</request_method>
                </item>
                <item>
                    <name>VMWare Build</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.4.1.6876.1.4.0</snmp_oid>
                    <key>vmwProdBuild.0</key>
                    <delay>3600</delay>
                    <applications>
                        <application>
                            <name>.General</name>
                        </application>
                    </applications>
                    <request_method>POST</request_method>
                </item>
                <item>
                    <name>ESXi Version</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>.1.3.6.1.4.1.6876.1.2.0</snmp_oid>
                    <key>vmwProdVersion.0</key>
                    <delay>3600</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <port>161</port>
                    <applications>
                        <application>
                            <name>.General</name>
                        </application>
                    </applications>
                    <request_method>POST</request_method>
                </item>
                <item>
                    <name>Snmp Availability</name>
                    <type>INTERNAL</type>
                    <key>zabbix[host,snmp,available]</key>
                    <history>7d</history>
                    <trends>90d</trends>
                    <applications>
                        <application>
                            <name>.General</name>
                        </application>
                    </applications>
                    <triggers>
                        <trigger>
                            <expression>{last()}&lt;&gt;1</expression>
                            <name>SNMP Unavailable</name>
                            <priority>HIGH</priority>
                            <description>SNMP не доступно.</description>
                        </trigger>
                    </triggers>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <name>CPU</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>discovery[{#SNMPVALUE},.1.3.6.1.2.1.25.3.2.1.3]</snmp_oid>
                    <key>vmwCPUType</key>
                    <delay>1d</delay>
                    <filter>
                        <conditions>
                            <condition>
                                <macro>{#SNMPVALUE}</macro>
                                <value>^CPU</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <item_prototypes>
                        <item_prototype>
                            <name>Used CPU% {#SNMPVALUE}</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.2.1.25.3.3.1.2.{#SNMPINDEX}</snmp_oid>
                            <key>vmwCPULoad[{#SNMPINDEX}]</key>
                            <delay>60</delay>
                            <units>%</units>
                            <applications>
                                <application>
                                    <name>Processors</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>CPU #{#SNMPINDEX} usage</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>FIXED</ymax_type_1>
                            <graph_items>
                                <graph_item>
                                    <drawtype>FILLED_REGION</drawtype>
                                    <color>C80000</color>
                                    <item>
                                        <host>Custom SNMP OS ESXi</host>
                                        <key>vmwCPULoad[{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <request_method>POST</request_method>
                </discovery_rule>
                <discovery_rule>
                    <name>DataStores</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>discovery[{#SNMPVALUE},.1.3.6.1.2.1.25.2.3.1.3]</snmp_oid>
                    <key>vmwDsDisplayName</key>
                    <delay>1d</delay>
                    <filter>
                        <conditions>
                            <condition>
                                <macro>{#SNMPVALUE}</macro>
                                <value>^/vmfs/volumes/[a-z,A-Z]</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <item_prototypes>
                        <item_prototype>
                            <name>Free Space % {#SNMPVALUE}</name>
                            <type>CALCULATED</type>
                            <key>vmwDSFreePercent[{#SNMPINDEX}]</key>
                            <delay>60</delay>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <params>last(&quot;vmwDSFree[{#SNMPINDEX}]&quot;)/ last(&quot;vmwDSTotal[{#SNMPINDEX}]&quot;)*100</params>
                            <applications>
                                <application>
                                    <name>Disk partitions</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Free Space {#SNMPVALUE}</name>
                            <type>CALCULATED</type>
                            <key>vmwDSFree[{#SNMPINDEX}]</key>
                            <delay>60</delay>
                            <units>B</units>
                            <params>last(&quot;vmwDSTotal[{#SNMPINDEX}]&quot;)-last(&quot;vmwDSUsed[{#SNMPINDEX}]&quot;)</params>
                            <applications>
                                <application>
                                    <name>Disk partitions</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Remote Mount {#SNMPVALUE}</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.2.1.25.3.8.1.3.{#SNMPINDEX}</snmp_oid>
                            <key>vmwDSRemote[{#SNMPINDEX}]</key>
                            <delay>600</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <applications>
                                <application>
                                    <name>Disk partitions</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Total Space {#SNMPVALUE}</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.2.1.25.2.3.1.5.{#SNMPINDEX}</snmp_oid>
                            <key>vmwDSTotal[{#SNMPINDEX}]</key>
                            <delay>600</delay>
                            <units>B</units>
                            <applications>
                                <application>
                                    <name>Disk partitions</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <params>4096</params>
                                </step>
                            </preprocessing>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Used Space % {#SNMPVALUE}</name>
                            <type>CALCULATED</type>
                            <key>vmwDSUsedPercent[{#SNMPINDEX}]</key>
                            <delay>60</delay>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <params>last(&quot;vmwDSUsed[{#SNMPINDEX}]&quot;)/last(&quot;vmwDSTotal[{#SNMPINDEX}]&quot;)*100</params>
                            <applications>
                                <application>
                                    <name>Disk partitions</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Used Space {#SNMPVALUE}</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.2.1.25.2.3.1.6.{#SNMPINDEX}</snmp_oid>
                            <key>vmwDSUsed[{#SNMPINDEX}]</key>
                            <delay>60</delay>
                            <units>B</units>
                            <applications>
                                <application>
                                    <name>Disk partitions</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <params>4096</params>
                                </step>
                            </preprocessing>
                            <request_method>POST</request_method>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Custom SNMP OS ESXi:vmwDSUsed[{#SNMPINDEX}].last(0)} / {Custom SNMP OS ESXi:vmwDSTotal[{#SNMPINDEX}].last(0)} &gt; 0.95</expression>
                            <name>Available Space is less than 5% on {#SNMPVALUE}</name>
                            <status>DISABLED</status>
                            <priority>HIGH</priority>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Space % usage {#SNMPVALUE}</name>
                            <yaxismax>0.0000</yaxismax>
                            <show_work_period>NO</show_work_period>
                            <show_triggers>NO</show_triggers>
                            <type>PIE</type>
                            <graph_items>
                                <graph_item>
                                    <color>00EE00</color>
                                    <item>
                                        <host>Custom SNMP OS ESXi</host>
                                        <key>vmwDSFreePercent[{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>EE0000</color>
                                    <item>
                                        <host>Custom SNMP OS ESXi</host>
                                        <key>vmwDSUsedPercent[{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Space usage {#SNMPVALUE}</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <ymax_type_1>ITEM</ymax_type_1>
                            <ymax_item_1>
                                <host>Custom SNMP OS ESXi</host>
                                <key>vmwDSTotal[{#SNMPINDEX}]</key>
                            </ymax_item_1>
                            <graph_items>
                                <graph_item>
                                    <drawtype>FILLED_REGION</drawtype>
                                    <color>00EE00</color>
                                    <item>
                                        <host>Custom SNMP OS ESXi</host>
                                        <key>vmwDSTotal[{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>FILLED_REGION</drawtype>
                                    <color>C80000</color>
                                    <item>
                                        <host>Custom SNMP OS ESXi</host>
                                        <key>vmwDSUsed[{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <request_method>POST</request_method>
                </discovery_rule>
                <discovery_rule>
                    <name>Environment discovery</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>discovery[{#SNMPVALUE},1.3.6.1.4.1.6876.4.20.3.1.1]</snmp_oid>
                    <key>vmwEnvIndex</key>
                    <delay>1d</delay>
                    <filter>
                        <conditions>
                            <condition>
                                <macro>{#SNMPVALUE}</macro>
                                <value>1048576|4194304|8388608|2097152</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <description>A unique identifier that does not persist across management restarts</description>
                    <item_prototypes>
                        <item_prototype>
                            <name>ESXi subsystem {#SNMPINDEX} description</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>1.3.6.1.4.1.6876.4.20.3.1.4.{#SNMPINDEX}</snmp_oid>
                            <key>vmwEventDescription[{#SNMPINDEX}]</key>
                            <delay>60s</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>Human readable description of this event</description>
                            <applications>
                                <application>
                                    <name>Environment</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>ESXi subsystem {#SNMPINDEX} status</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>1.3.6.1.4.1.6876.4.20.3.1.3.{#SNMPINDEX}</snmp_oid>
                            <key>vmwSubsystemStatus[{#SNMPINDEX}]</key>
                            <delay>60s</delay>
                            <description>Last reported state of this component</description>
                            <applications>
                                <application>
                                    <name>Environment</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>ESXi subsystem status</name>
                            </valuemap>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&lt;&gt;2</expression>
                                    <name>ESXi subsystem {#SNMPINDEX} on {HOST.NAME} status is not OK</name>
                                    <status>DISABLED</status>
                                    <priority>HIGH</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <name>ESXi subsystem {#SNMPINDEX} type</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>1.3.6.1.4.1.6876.4.20.3.1.2.{#SNMPINDEX}</snmp_oid>
                            <key>vmwSubsystemType[{#SNMPINDEX}]</key>
                            <delay>60s</delay>
                            <description>Hardware component reporting environmental state</description>
                            <applications>
                                <application>
                                    <name>Environment</name>
                                </application>
                            </applications>
                            <valuemap>
                                <name>ESXi subsystem type</name>
                            </valuemap>
                            <request_method>POST</request_method>
                        </item_prototype>
                    </item_prototypes>
                    <request_method>POST</request_method>
                </discovery_rule>
                <discovery_rule>
                    <name>Interfaces</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>discovery[{#SNMPVALUE},.1.3.6.1.2.1.31.1.1.1.1]</snmp_oid>
                    <key>vmwIFDisplayName</key>
                    <delay>1d</delay>
                    <filter>
                        <conditions>
                            <condition>
                                <macro>{#SNMPVALUE}</macro>
                                <value>vmnic*</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <item_prototypes>
                        <item_prototype>
                            <name>Interface Operational Status {#SNMPVALUE}</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.2.1.2.2.1.8.{#SNMPINDEX}</snmp_oid>
                            <key>vmwIFOperStatus.[{#SNMPINDEX}]</key>
                            <delay>60</delay>
                            <applications>
                                <application>
                                    <name>Interfaces</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <expression>{last()}&lt;&gt;1</expression>
                                    <name>Interface {#SNMPVALUE} on {HOST.NAME} Status is not OK</name>
                                    <priority>HIGH</priority>
                                    <description>UPlink отпал</description>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <request_method>POST</request_method>
                </discovery_rule>
                <discovery_rule>
                    <name>Memory</name>
                    <type>SNMPV2</type>
                    <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                    <snmp_oid>discovery[{#SNMPVALUE},.1.3.6.1.2.1.25.2.3.1.3]</snmp_oid>
                    <key>vmwMemDisplayName</key>
                    <delay>1d</delay>
                    <filter>
                        <conditions>
                            <condition>
                                <macro>{#SNMPVALUE}</macro>
                                <value>Real Memory</value>
                                <formulaid>A</formulaid>
                            </condition>
                        </conditions>
                    </filter>
                    <item_prototypes>
                        <item_prototype>
                            <name>Free Memory %</name>
                            <type>CALCULATED</type>
                            <key>vmwMemFreePercent[{#SNMPINDEX}]</key>
                            <delay>60</delay>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <params>last([vmwMemFree[{#SNMPINDEX}]];)/ last(&quot;vmwMemTotal[{#SNMPINDEX}]&quot;)*100</params>
                            <applications>
                                <application>
                                    <name>Memory</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Free Memory</name>
                            <type>CALCULATED</type>
                            <key>vmwMemFree[{#SNMPINDEX}]</key>
                            <delay>60</delay>
                            <units>Bytes</units>
                            <params>last(&quot;vmwMemTotal[{#SNMPINDEX}]&quot;)-last([vmwMemUsed[{#SNMPINDEX}]&quot;)</params>
                            <applications>
                                <application>
                                    <name>Memory</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Total Memory</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.2.1.25.2.2.0</snmp_oid>
                            <key>vmwMemTotal[{#SNMPINDEX}]</key>
                            <delay>300</delay>
                            <units>Bytes</units>
                            <applications>
                                <application>
                                    <name>Memory</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <params>1024</params>
                                </step>
                            </preprocessing>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Used Memory %</name>
                            <type>CALCULATED</type>
                            <key>vmwMemUsedPercent[{#SNMPINDEX}]</key>
                            <delay>60</delay>
                            <value_type>FLOAT</value_type>
                            <units>%</units>
                            <params>last([vmwMemUsed[{#SNMPINDEX}]])/ last(&quot;vmwMemTotal[{#SNMPINDEX}]&quot;)*100</params>
                            <applications>
                                <application>
                                    <name>Memory</name>
                                </application>
                            </applications>
                            <request_method>POST</request_method>
                        </item_prototype>
                        <item_prototype>
                            <name>Memory Used</name>
                            <type>SNMPV2</type>
                            <snmp_community>{$SNMP_COMMUNITY}</snmp_community>
                            <snmp_oid>.1.3.6.1.2.1.25.2.3.1.6.{#SNMPINDEX}</snmp_oid>
                            <key>vmwMemUsed[{#SNMPINDEX}]</key>
                            <delay>60</delay>
                            <units>Bytes</units>
                            <applications>
                                <application>
                                    <name>Memory</name>
                                </application>
                            </applications>
                            <preprocessing>
                                <step>
                                    <type>MULTIPLIER</type>
                                    <params>1024</params>
                                </step>
                            </preprocessing>
                            <request_method>POST</request_method>
                        </item_prototype>
                    </item_prototypes>
                    <trigger_prototypes>
                        <trigger_prototype>
                            <expression>{Custom SNMP OS ESXi:vmwMemUsed[{#SNMPINDEX}].last(0)} / {Custom SNMP OS ESXi:vmwMemTotal[{#SNMPINDEX}].last(0)} &gt; 0.9</expression>
                            <name>Available Memory is less than 10% on $1</name>
                            <status>DISABLED</status>
                            <priority>HIGH</priority>
                        </trigger_prototype>
                    </trigger_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <name>Memory % {#SNMPVALUE}</name>
                            <yaxismax>0.0000</yaxismax>
                            <show_work_period>NO</show_work_period>
                            <show_triggers>NO</show_triggers>
                            <type>PIE</type>
                            <show_3d>YES</show_3d>
                            <graph_items>
                                <graph_item>
                                    <drawtype>FILLED_REGION</drawtype>
                                    <color>C80000</color>
                                    <item>
                                        <host>Custom SNMP OS ESXi</host>
                                        <key>vmwMemUsedPercent[{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>00C800</color>
                                    <item>
                                        <host>Custom SNMP OS ESXi</host>
                                        <key>vmwMemFreePercent[{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <name>Memory {#SNMPVALUE}</name>
                            <ymin_type_1>FIXED</ymin_type_1>
                            <graph_items>
                                <graph_item>
                                    <drawtype>FILLED_REGION</drawtype>
                                    <color>00DD00</color>
                                    <item>
                                        <host>Custom SNMP OS ESXi</host>
                                        <key>vmwMemTotal[{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <drawtype>FILLED_REGION</drawtype>
                                    <color>C80000</color>
                                    <item>
                                        <host>Custom SNMP OS ESXi</host>
                                        <key>vmwMemUsed[{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <drawtype>BOLD_LINE</drawtype>
                                    <color>0000EE</color>
                                    <yaxisside>RIGHT</yaxisside>
                                    <item>
                                        <host>Custom SNMP OS ESXi</host>
                                        <key>vmwMemUsedPercent[{#SNMPINDEX}]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <request_method>POST</request_method>
                </discovery_rule>
            </discovery_rules>
        </template>
    </templates>
    <value_maps>
        <value_map>
            <name>ESXi subsystem status</name>
            <mappings>
                <mapping>
                    <value>1</value>
                    <newvalue>unknown</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>normal</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>marginal</newvalue>
                </mapping>
                <mapping>
                    <value>4</value>
                    <newvalue>critical</newvalue>
                </mapping>
                <mapping>
                    <value>5</value>
                    <newvalue>failed</newvalue>
                </mapping>
            </mappings>
        </value_map>
        <value_map>
            <name>ESXi subsystem type</name>
            <mappings>
                <mapping>
                    <value>1</value>
                    <newvalue>unknown</newvalue>
                </mapping>
                <mapping>
                    <value>2</value>
                    <newvalue>chassis</newvalue>
                </mapping>
                <mapping>
                    <value>3</value>
                    <newvalue>powerSupply</newvalue>
                </mapping>
                <mapping>
                    <value>4</value>
                    <newvalue>fan</newvalue>
                </mapping>
                <mapping>
                    <value>5</value>
                    <newvalue>cpu</newvalue>
                </mapping>
                <mapping>
                    <value>6</value>
                    <newvalue>memory</newvalue>
                </mapping>
                <mapping>
                    <value>7</value>
                    <newvalue>battery</newvalue>
                </mapping>
                <mapping>
                    <value>8</value>
                    <newvalue>temperatureSensor</newvalue>
                </mapping>
                <mapping>
                    <value>9</value>
                    <newvalue>raidController</newvalue>
                </mapping>
                <mapping>
                    <value>10</value>
                    <newvalue>voltage</newvalue>
                </mapping>
            </mappings>
        </value_map>
    </value_maps>
</zabbix_export>
